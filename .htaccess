AddType application/manifest+json .webmanifest
# ==============================
# üåê –û—Å–Ω–æ–≤–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–∞–π—Ç—É
# ==============================

# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ UTF-8
AddDefaultCharset UTF-8

# –ó–∞–±–æ—Ä–æ–Ω—è—î–º–æ –ø–æ–∫–∞–∑ –≤–º—ñ—Å—Ç—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π
Options -Indexes

# –í–º–∏–∫–∞—î–º–æ –ø–µ—Ä–µ–ø–∏—Å—É–≤–∞–Ω–Ω—è URL
RewriteEngine On

# ------------------------------
# üîÅ –†–µ–¥–∏—Ä–µ–∫—Ç–∏ –¥–ª—è SEO
# ------------------------------

# –ü—Ä–∏–º—É—Å–æ–≤–∏–π HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# –í–∏–¥–∞–ª—è—î–º–æ www (–ø–µ—Ä–µ—Ö–æ–¥–∏–º–æ –Ω–∞ https://esoterichka.com.ua)
RewriteCond %{HTTP_HOST} ^www\.esoterichka\.com\.ua [NC]
RewriteRule ^(.*)$ https://esoterichka.com.ua/$1 [L,R=301]

# –†–µ–¥–∏—Ä–µ–∫—Ç /index.html ‚Üí /
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/index\.html [NC]
RewriteRule ^index\.html$ https://esoterichka.com.ua/ [R=301,L]

# ------------------------------
# üöÄ –ö–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å
# ------------------------------

<IfModule mod_expires.c>
  ExpiresActive On

  # –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º ‚Äî 1 –º—ñ—Å—è—Ü—å
  ExpiresDefault "access plus 1 month"

  # –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è ‚Äî 1 —Ä—ñ–∫
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"

  # CSS, JS ‚Äî 1 —Ä—ñ–∫
  ExpiresByType text/css "access plus 1 year"
  ExpiresByType application/javascript "access plus 1 year"

  # –®—Ä–∏—Ñ—Ç–∏
  ExpiresByType font/woff "access plus 1 year"
  ExpiresByType font/woff2 "access plus 1 year"
</IfModule>

<IfModule mod_headers.c>
  # –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∫–µ—à—É
  <FilesMatch "\.(js|css|jpg|jpeg|png|gif|svg|webp|woff|woff2)$">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>
</IfModule>

# ------------------------------
# ü™∂ –ö–æ–º–ø—Ä–µ—Å—ñ—è (GZIP / Brotli)
# ------------------------------

<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css
  AddOutputFilterByType DEFLATE application/javascript application/json application/xml
  AddOutputFilterByType DEFLATE image/svg+xml
</IfModule>

<IfModule mod_brotli.c>
  BrotliCompressionQuality 5
</IfModule>

# ------------------------------
# üîí –ë–µ–∑–ø–µ–∫–∞
# ------------------------------

<IfModule mod_headers.c>
  Header always set X-Frame-Options "SAMEORIGIN"
  Header always set X-Content-Type-Options "nosniff"
  Header always set X-XSS-Protection "1; mode=block"
  Header always set Referrer-Policy "strict-origin-when-cross-origin"
  Header always set Permissions-Policy "geolocation=(), microphone=(), camera=()"
</IfModule>

# –ó–∞–±–æ—Ä–æ–Ω–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ —Å–∏—Å—Ç–µ–º–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
<FilesMatch "(\.(htaccess|htpasswd|ini|log|sh|bak))$">
  Order Allow,Deny
  Deny from all
</FilesMatch>

# ------------------------------
# üì® PHP-—Ñ–∞–π–ª–∏
# ------------------------------

<Files "telegram.php">
  Require all granted
</Files>

# ------------------------------
# ‚ö†Ô∏è –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
# ------------------------------

# –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö 404 ‚Üí –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
ErrorDocument 404 /index.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ /index.html [L,R=302]

# ------------------------------
# ‚úÖ –ö—ñ–Ω–µ—Ü—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
# ------------------------------
