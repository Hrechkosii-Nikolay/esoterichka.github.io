const inputs=document.querySelectorAll(".input-age");function isValidDate(e){let[t,l,i]=e.split(".").map(Number),n=new Date(i,l-1,t),s=n.getFullYear()===i&&n.getMonth()===l-1&&n.getDate()===t,a=new Date;return!!s&&!(i<1900)&&!(n>a)}inputs.forEach(e=>{e.addEventListener("input",t=>{let l=t.target.value.replace(/\D/g,""),i=e.selectionStart,n=e.value.length;l.length>2&&l.length<=4?l=l.slice(0,2)+"."+l.slice(2):l.length>4&&(l=l.slice(0,2)+"."+l.slice(2,4)+"."+l.slice(4,8)),e.value=l;let s=l.length-n;e.setSelectionRange(i+s,i+s),10===l.length?isValidDate(l)?(e.style.borderColor="",e.setCustomValidity("")):(e.style.borderColor="red",e.setCustomValidity("Некоректна дата народження")):(e.style.borderColor="",e.setCustomValidity(""))}),e.addEventListener("keydown",t=>{if("Backspace"===t.key){let l=e.selectionStart,i=e.value;l&&"."===i[l-1]&&(t.preventDefault(),e.value=i.slice(0,l-1)+i.slice(l),e.setSelectionRange(l-1,l-1))}})});